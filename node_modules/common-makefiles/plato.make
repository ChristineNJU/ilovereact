###
# This File is part of the common-makefiles repository.
# <http://github.com/subtub/common-makefiles>
#
# Generated by the buil.sh script. DO NOT EDIT!
# Date: Do 14 Nov 2013 09:56:54 CET
###


# plato parameter

ifndef PLATO_TITLE
	PLATO_TITLE := $(shell basename $(PWD))
endif

ifndef PLATO_OUTPUT_DIR
	PLATO_OUTPUT_DIR := report
endif

ifndef PLATO_FILES
	PLATO_FILES := lib/
endif

# plato targets

plato:
	@node node_modules/.bin/plato --title $(PLATO_TITLE) --recurse --dir $(PLATO_OUTPUT_DIR) $(PLATO_FILES)

plato-gh-pages:
	@git checkout gh-pages
	@cp -rf $(PLATO_OUTPUT_DIR) ../$(PLATO_OUTPUT_DIR)
	@git checkout master
	@mv ../$(PLATO_OUTPUT_DIR) $(PLATO_OUTPUT_DIR)
	$(MAKE) plato
	@mv $(PLATO_OUTPUT_DIR) ../$(PLATO_OUTPUT_DIR)
	@git checkout gh-pages
	@rm -rf $(PLATO_OUTPUT_DIR)
	@mv ../$(PLATO_OUTPUT_DIR) $(PLATO_OUTPUT_DIR)
	@git add report/
	@git commit -m "Report updated by CommonMakefiles"
	@git push
	@git checkout master

plato-help:
	@echo ""
	@echo "common-makefiles v0.3.0"
	@echo ""
	@echo "Usage:"
	@echo ""
	@echo "  plato                  run the report generator"
	@echo "  plato-gh-pages         make plato and push to gh-pages branch"
	@echo "  plato-help             output usage information"
	@echo "  plato-version          output the version number"
	@echo ""
	@echo "Report bugs to <https://github.com/subtub/common-makefiles/issues>"
	@echo ""

plato-version:
	@node node_modules/.bin/plato --version

.PHONY: plato plato-gh-pages plato-help plato-version

